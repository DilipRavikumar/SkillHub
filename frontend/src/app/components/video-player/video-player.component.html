<div class="video-player-container">
  <div *ngIf="isLoading" class="loading-container">
    <div class="spinner"></div>
    <p>Loading video...</p>
  </div>

  <div *ngIf="error" class="error-container">
    <i class="fas fa-exclamation-triangle"></i>
    <p>{{ error }}</p>
  </div>

  <div *ngIf="!isLoading && !error && actualVideoUrl" class="video-container">
    <video 
      id="videoPlayer"
      [src]="actualVideoUrl"
      class="video-element"
      controls
      controlsList="nodownload"
      preload="metadata"
      (loadedmetadata)="onVideoLoaded()"
      (timeupdate)="onTimeUpdate()"
      (play)="onPlay()"
      (pause)="onPause()"
      (ended)="onEnded()"
      (dblclick)="toggleFullscreen()"
      (keydown)="onKeyDown($event)">
      Your browser does not support the video tag.
    </video>

    <!-- Progress tracking overlay -->
    <div class="progress-overlay">
      <div class="progress-info">
        <span class="progress-text">Progress: {{ getProgressPercentage() | number:'1.0-0' }}%</span>
        <span class="time-text">{{ formatTime(currentTime) }} / {{ formatTime(duration) }}</span>
      </div>
    </div>
  </div>
</div>