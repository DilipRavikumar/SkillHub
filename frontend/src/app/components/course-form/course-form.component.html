<div class="course-form-container">
  <!-- Enhanced Header Section -->
  <div class="form-header">
    <div class="header-content">
      <div class="breadcrumb">
        <a routerLink="/dashboard" class="breadcrumb-link">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M10 20V14H14V20H19V12H22L12 3L2 12H5V20H10Z" fill="currentColor"/>
          </svg>
          Dashboard
        </a>
        <span class="breadcrumb-separator">></span>
        <span class="breadcrumb-current">{{ isEditMode ? 'Edit Course' : 'Create Course' }}</span>
      </div>
      
      <div class="title-section">
        <div class="title-icon">
          <svg width="40" height="40" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 2L2 7L12 12L22 7L12 2Z" fill="currentColor"/>
            <path d="M2 17L12 22L22 17" fill="currentColor"/>
            <path d="M2 12L12 17L22 12" fill="currentColor"/>
          </svg>
        </div>
        <div class="title-content">
          <h1 class="page-title">{{ isEditMode ? 'Edit Course' : 'Create New Course' }}</h1>
          <p class="page-subtitle">
            {{ isEditMode ? 'Update your course information and settings' : 'Share your knowledge with students around the world' }}
          </p>
        </div>
      </div>
      
      <!-- Success Tips -->
      <div class="success-tips">
        <div class="tip-item">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 2L13.09 8.26L22 9L13.09 9.74L12 16L10.91 9.74L2 9L10.91 8.26L12 2Z" fill="currentColor"/>
          </svg>
          <span>Clear & Engaging Title</span>
        </div>
        <div class="tip-item">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 2C6.48 2 2 6.48 2 12S6.48 22 12 22S22 17.52 22 12S17.52 2 12 2ZM13 17H11V15H13V17ZM13 13H11V7H13V13Z" fill="currentColor"/>
          </svg>
          <span>Quality Content</span>
        </div>
        <div class="tip-item">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M21 19V5C21 3.9 20.1 3 19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19ZM8.5 13.5L11 16.51L15.5 11L19 15H5L8.5 13.5Z" fill="currentColor"/>
          </svg>
          <span>Eye-Catching Thumbnail</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Form Content -->
  <div class="form-content">
    <form [formGroup]="courseForm" (ngSubmit)="onSubmit()" class="course-form">
      
      <!-- Enhanced Progress Indicator -->
      <div class="progress-indicator">
        <div class="progress-step" [class.active]="currentStep >= 1" [class.completed]="currentStep > 1">
          <div class="step-number">
            <svg *ngIf="currentStep > 1" width="16" height="16" viewBox="0 0 24 24" fill="none">
              <path d="M9 16.17L4.83 12L3.41 13.41L9 19L21 7L19.59 5.59L9 16.17Z" fill="currentColor"/>
            </svg>
            <span *ngIf="currentStep <= 1">1</span>
          </div>
          <div class="step-label">Basic Info</div>
        </div>
        <div class="progress-line" [class.completed]="currentStep > 1"></div>
        <div class="progress-step" [class.active]="currentStep >= 2" [class.completed]="currentStep > 2">
          <div class="step-number">
            <svg *ngIf="currentStep > 2" width="16" height="16" viewBox="0 0 24 24" fill="none">
              <path d="M9 16.17L4.83 12L3.41 13.41L9 19L21 7L19.59 5.59L9 16.17Z" fill="currentColor"/>
            </svg>
            <span *ngIf="currentStep <= 2">2</span>
          </div>
          <div class="step-label">Course Details</div>
        </div>
        <div class="progress-line" [class.completed]="currentStep > 2"></div>
        <div class="progress-step" [class.active]="currentStep >= 3" [class.completed]="currentStep > 3">
          <div class="step-number">
            <svg *ngIf="currentStep > 3" width="16" height="16" viewBox="0 0 24 24" fill="none">
              <path d="M9 16.17L4.83 12L3.41 13.41L9 19L21 7L19.59 5.59L9 16.17Z" fill="currentColor"/>
            </svg>
            <span *ngIf="currentStep <= 3">3</span>
          </div>
          <div class="step-label">Pricing & Settings</div>
        </div>
      </div>

      <!-- Step 1: Basic Information -->
      <div class="form-section" [class.active]="currentStep === 1">
        <div class="section-header">
          <div class="section-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19ZM17 12H7V10H17V12ZM15 16H7V14H15V16ZM17 8H7V6H17V8Z" fill="currentColor"/>
            </svg>
          </div>
          <div class="section-title-content">
            <h2 class="section-title">Basic Information</h2>
            <p class="section-description">Tell us about your course</p>
          </div>
        </div>
        
        <div class="form-grid">
          <div class="form-group full-width">
            <label for="title" class="form-label">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M4 6H20V8H4V6ZM4 11H20V13H4V11ZM4 16H20V18H4V16Z" fill="currentColor"/>
              </svg>
              Course Title
              <span class="required">*</span>
            </label>
            <input
              type="text"
              id="title"
              formControlName="title"
              class="form-input"
              [class.error]="isFieldInvalid('title')"
              placeholder="Enter an engaging course title"
              (blur)="updateStep()">
            <div class="form-hint">Make it catchy and descriptive (5-100 characters)</div>
            <div class="error-message" *ngIf="getFieldError('title')">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2C6.48 2 2 6.48 2 12S6.48 22 12 22S22 17.52 22 12S17.52 2 12 2ZM13 17H11V15H13V17ZM13 13H11V7H13V13Z" fill="currentColor"/>
              </svg>
              {{ getFieldError('title') }}
            </div>
          </div>

          <div class="form-group full-width">
            <label for="description" class="form-label">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M14 2H6A2 2 0 0 0 4 4V20A2 2 0 0 0 6 22H18A2 2 0 0 0 20 20V8L14 2ZM18 20H6V4H13V9H18V20Z" fill="currentColor"/>
              </svg>
              Course Description
              <span class="required">*</span>
            </label>
            <textarea
              id="description"
              formControlName="description"
              class="form-textarea"
              [class.error]="isFieldInvalid('description')"
              placeholder="Describe what students will learn in this course. Be specific about the skills and knowledge they'll gain."
              rows="4"
              (blur)="updateStep()"></textarea>
            <div class="form-hint">Detailed description helps students understand what they'll learn (20-1000 characters)</div>
            <div class="error-message" *ngIf="getFieldError('description')">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2C6.48 2 2 6.48 2 12S6.48 22 12 22S22 17.52 22 12S17.52 2 12 2ZM13 17H11V15H13V17ZM13 13H11V7H13V13Z" fill="currentColor"/>
              </svg>
              {{ getFieldError('description') }}
            </div>
          </div>

          <div class="form-group">
            <label for="category" class="form-label">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2L13.09 8.26L22 9L13.09 9.74L12 16L10.91 9.74L2 9L10.91 8.26L12 2Z" fill="currentColor"/>
              </svg>
              Category
              <span class="required">*</span>
            </label>
            <select
              id="category"
              formControlName="category"
              class="form-select"
              [class.error]="isFieldInvalid('category')"
              (change)="updateStep()">
              <option value="">Select a category</option>
              <option *ngFor="let category of categories" [value]="category.value">
                {{ category.label }}
              </option>
            </select>
            <div class="error-message" *ngIf="getFieldError('category')">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2C6.48 2 2 6.48 2 12S6.48 22 12 22S22 17.52 22 12S17.52 2 12 2ZM13 17H11V15H13V17ZM13 13H11V7H13V13Z" fill="currentColor"/>
              </svg>
              {{ getFieldError('category') }}
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22S22 17.5 22 12S17.5 2 12 2ZM12 20C7.59 20 4 16.41 4 12S7.59 4 12 4S20 7.59 20 12S16.41 20 12 20ZM12.5 7H11V13L16.25 16.15L17 14.92L12.5 12.25V7Z" fill="currentColor"/>
              </svg>
              Difficulty Level
              <span class="required">*</span>
            </label>
            <div class="difficulty-selector">
              <button
                type="button"
                *ngFor="let difficulty of difficulties"
                class="difficulty-btn"
                [class.active]="courseForm.get('difficulty')?.value === difficulty.value"
                (click)="selectDifficulty(difficulty.value)">
                <div class="difficulty-icon">
                  <svg *ngIf="difficulty.value === 'BEGINNER'" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 2L13.09 8.26L22 9L13.09 9.74L12 16L10.91 9.74L2 9L10.91 8.26L12 2Z" fill="currentColor"/>
                  </svg>
                  <svg *ngIf="difficulty.value === 'INTERMEDIATE'" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 2L13.09 8.26L22 9L13.09 9.74L12 16L10.91 9.74L2 9L10.91 8.26L12 2Z" fill="currentColor"/>
                    <path d="M12 2L13.09 8.26L22 9L13.09 9.74L12 16L10.91 9.74L2 9L10.91 8.26L12 2Z" fill="currentColor"/>
                  </svg>
                  <svg *ngIf="difficulty.value === 'ADVANCED'" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 2L13.09 8.26L22 9L13.09 9.74L12 16L10.91 9.74L2 9L10.91 8.26L12 2Z" fill="currentColor"/>
                    <path d="M12 2L13.09 8.26L22 9L13.09 9.74L12 16L10.91 9.74L2 9L10.91 8.26L12 2Z" fill="currentColor"/>
                    <path d="M12 2L13.09 8.26L22 9L13.09 9.74L12 16L10.91 9.74L2 9L10.91 8.26L12 2Z" fill="currentColor"/>
                  </svg>
                </div>
                <div class="difficulty-content">
                  <div class="difficulty-name">{{ difficulty.label }}</div>
                  <div class="difficulty-desc">
                    <span *ngIf="difficulty.value === 'BEGINNER'">No prior experience needed</span>
                    <span *ngIf="difficulty.value === 'INTERMEDIATE'">Some experience required</span>
                    <span *ngIf="difficulty.value === 'ADVANCED'">Expert level content</span>
                  </div>
                </div>
              </button>
            </div>
            <div class="error-message" *ngIf="getFieldError('difficulty')">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2C6.48 2 2 6.48 2 12S6.48 22 12 22S22 17.52 22 12S17.52 2 12 2ZM13 17H11V15H13V17ZM13 13H11V7H13V13Z" fill="currentColor"/>
              </svg>
              {{ getFieldError('difficulty') }}
            </div>
          </div>
        </div>

        <div class="step-actions">
          <button type="button" class="btn-next" (click)="nextStep()" [disabled]="!isStep1Valid()">
            Next Step
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M8.59 16.59L13.17 12L8.59 7.41L10 6L16 12L10 18L8.59 16.59Z" fill="currentColor"/>
            </svg>
          </button>
        </div>
      </div>

      <!-- Step 2: Course Details -->
      <div class="form-section" [class.active]="currentStep === 2">
        <div class="section-header">
          <div class="section-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22S22 17.5 22 12S17.5 2 12 2ZM12 20C7.59 20 4 16.41 4 12S7.59 4 12 4S20 7.59 20 12S16.41 20 12 20ZM12.5 7H11V13L16.25 16.15L17 14.92L12.5 12.25V7Z" fill="currentColor"/>
            </svg>
          </div>
          <div class="section-title-content">
            <h2 class="section-title">Course Details</h2>
            <p class="section-description">Add course duration and thumbnail</p>
          </div>
        </div>

        <div class="form-grid">
          <div class="form-group">
            <label for="duration" class="form-label">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22S22 17.5 22 12S17.5 2 12 2ZM12 20C7.59 20 4 16.41 4 12S7.59 4 12 4S20 7.59 20 12S16.41 20 12 20ZM12.5 7H11V13L16.25 16.15L17 14.92L12.5 12.25V7Z" fill="currentColor"/>
              </svg>
              Duration
              <span class="required">*</span>
            </label>
            <input
              type="text"
              id="duration"
              formControlName="duration"
              class="form-input"
              [class.error]="isFieldInvalid('duration')"
              placeholder="e.g., 5 hours, 2 weeks"
              (blur)="updateStep()">
            <div class="form-hint">Estimated time to complete the course</div>
            <div class="error-message" *ngIf="getFieldError('duration')">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2C6.48 2 2 6.48 2 12S6.48 22 12 22S22 17.52 22 12S17.52 2 12 2ZM13 17H11V15H13V17ZM13 13H11V7H13V13Z" fill="currentColor"/>
              </svg>
              {{ getFieldError('duration') }}
            </div>
          </div>

          <div class="form-group">
            <label for="language" class="form-label">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12.87 15.07L10.33 12.56L10.36 12.53C12.1 10.59 13.34 8.36 14.07 6H17V4H10V2H8V4H1V6H12.17C11.5 7.92 10.44 9.75 9 11.35C8.07 10.32 7.3 9.19 6.69 8H4.69C5.42 9.63 6.42 11.17 7.67 12.56L2.58 17.58L4 19L9 14L12.11 17.11L12.87 15.07ZM18.5 10H16.5L12 22H14L15.12 19H19.87L21 22H23L18.5 10ZM15.88 17L17.5 12.67L19.12 17H15.88Z" fill="currentColor"/>
              </svg>
              Language
            </label>
            <select
              id="language"
              formControlName="language"
              class="form-select">
              <option value="en">English</option>
              <option value="es">Spanish</option>
              <option value="fr">French</option>
              <option value="de">German</option>
              <option value="it">Italian</option>
              <option value="pt">Portuguese</option>
              <option value="zh">Chinese</option>
              <option value="ja">Japanese</option>
              <option value="ko">Korean</option>
              <option value="ar">Arabic</option>
            </select>
          </div>
        </div>

        <div class="form-group full-width">
          <label class="form-label">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M21 19V5C21 3.9 20.1 3 19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19ZM8.5 13.5L11 16.51L15.5 11L19 15H5L8.5 13.5Z" fill="currentColor"/>
            </svg>
            Course Thumbnail
            <span class="required">*</span>
          </label>
          
          <!-- Enhanced Image Upload Section -->
          <div class="image-upload-section">
            <div class="upload-area" 
                 [class.dragover]="isDragOver"
                 (dragover)="onDragOver($event)"
                 (dragleave)="onDragLeave($event)"
                 (drop)="onDrop($event)">
              
              <!-- File Input -->
              <input
                type="file"
                id="thumbnail"
                accept="image/*"
                (change)="onFileSelected($event)"
                class="file-input"
                #fileInput>
              
              <!-- Upload Interface -->
              <div class="upload-interface" *ngIf="!imagePreview">
                <div class="upload-icon">
                  <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 19V5C21 3.9 20.1 3 19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19ZM8.5 13.5L11 16.51L15.5 11L19 15H5L8.5 13.5Z" fill="currentColor"/>
                  </svg>
                </div>
                <div class="upload-text">
                  <h3>Upload Course Thumbnail</h3>
                  <p>Drag and drop an image here, or click to browse</p>
                </div>
                <button type="button" class="upload-btn" (click)="fileInput.click()">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M19 13H13V19H11V13H5V11H11V5H13V11H19V13Z" fill="currentColor"/>
                  </svg>
                  Choose Image
                </button>
              </div>

              <!-- Image Preview -->
              <div class="image-preview" *ngIf="imagePreview">
                <img [src]="imagePreview" alt="Course thumbnail preview" class="preview-image">
                <div class="image-overlay">
                  <button type="button" class="change-image-btn" (click)="fileInput.click()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M3 17.25V21H6.75L17.81 9.94L14.06 6.19L3 17.25ZM20.71 7.04C21.1 6.65 21.1 6.02 20.71 5.63L18.37 3.29C17.98 2.9 17.35 2.9 16.96 3.29L15.13 5.12L18.88 8.87L20.71 7.04Z" fill="currentColor"/>
                    </svg>
                    Change
                  </button>
                  <button type="button" class="remove-image-btn" (click)="removeImage()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z" fill="currentColor"/>
                    </svg>
                    Remove
                  </button>
                </div>
              </div>

              <!-- Upload Status -->
              <div class="upload-status" *ngIf="isUploading">
                <div class="spinner-small"></div>
                <span>Uploading image...</span>
              </div>
            </div>

            <div class="upload-guidelines">
              <h4>Image Guidelines</h4>
              <ul>
                <li>Recommended size: 1280x720 pixels (16:9 aspect ratio)</li>
                <li>Maximum file size: 5MB</li>
                <li>Supported formats: JPG, PNG, GIF</li>
                <li>Use high-quality, clear images that represent your course</li>
              </ul>
            </div>
          </div>

          <div class="error-message" *ngIf="getFieldError('thumbnail') || (!isEditMode && !imagePreview && (courseForm.get('thumbnail')?.touched || error === 'Please upload a course thumbnail'))">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 2C6.48 2 2 6.48 2 12S6.48 22 12 22S22 17.52 22 12S17.52 2 12 2ZM13 17H11V15H13V17ZM13 13H11V7H13V13Z" fill="currentColor"/>
            </svg>
            {{ getFieldError('thumbnail') || (error === 'Please upload a course thumbnail' ? error : '') }}
          </div>
        </div>

        <div class="step-actions">
          <button type="button" class="btn-back" (click)="prevStep()">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M15.41 7.41L14 6L8 12L14 18L15.41 16.59L10.83 12L15.41 7.41Z" fill="currentColor"/>
            </svg>
            Previous
          </button>
          <button type="button" class="btn-next" (click)="nextStep()" [disabled]="!isStep2Valid()">
            Next Step
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M8.59 16.59L13.17 12L8.59 7.41L10 6L16 12L10 18L8.59 16.59Z" fill="currentColor"/>
            </svg>
          </button>
        </div>
      </div>

      <!-- Step 3: Pricing & Settings -->
      <div class="form-section" [class.active]="currentStep === 3">
        <div class="section-header">
          <div class="section-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 2C6.48 2 2 6.48 2 12S6.48 22 12 22S22 17.52 22 12S17.52 2 12 2ZM12 20C7.59 20 4 16.41 4 12S7.59 4 12 4S20 7.59 20 12S16.41 20 12 20ZM12.5 7H11V13L16.25 16.15L17 14.92L12.5 12.25V7Z" fill="currentColor"/>
            </svg>
          </div>
          <div class="section-title-content">
            <h2 class="section-title">Pricing & Settings</h2>
            <p class="section-description">Set your course price and publishing options</p>
          </div>
        </div>

        <div class="form-grid">
          <div class="form-group">
            <label for="price" class="form-label">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2C6.48 2 2 6.48 2 12S6.48 22 12 22S22 17.52 22 12S17.52 2 12 2ZM12 20C7.59 20 4 16.41 4 12S7.59 4 12 4S20 7.59 20 12S16.41 20 12 20ZM12.5 7H11V13L16.25 16.15L17 14.92L12.5 12.25V7Z" fill="currentColor"/>
              </svg>
              Course Price
            </label>
            <div class="price-input-group">
              <span class="currency">$</span>
              <input
                type="number"
                id="price"
                formControlName="price"
                class="form-input"
                [class.error]="isFieldInvalid('price')"
                placeholder="0.00"
                min="0"
                step="0.01">
            </div>
            <div class="form-hint">Set to $0 for a free course</div>
            <div class="error-message" *ngIf="getFieldError('price')">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2C6.48 2 2 6.48 2 12S6.48 22 12 22S22 17.52 22 12S17.52 2 12 2ZM13 17H11V15H13V17ZM13 13H11V7H13V13Z" fill="currentColor"/>
              </svg>
              {{ getFieldError('price') }}
            </div>
          </div>

          <div class="form-group">
            <label for="currency" class="form-label">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2C6.48 2 2 6.48 2 12S6.48 22 12 22S22 17.52 22 12S17.52 2 12 2ZM12 20C7.59 20 4 16.41 4 12S7.59 4 12 4S20 7.59 20 12S16.41 20 12 20ZM12.5 7H11V13L16.25 16.15L17 14.92L12.5 12.25V7Z" fill="currentColor"/>
              </svg>
              Currency
            </label>
            <select
              id="currency"
              formControlName="currency"
              class="form-select">
              <option value="USD">USD ($)</option>
              <option value="EUR">EUR (€)</option>
              <option value="GBP">GBP (£)</option>
              <option value="CAD">CAD (C$)</option>
              <option value="AUD">AUD (A$)</option>
            </select>
          </div>
        </div>

        <div class="form-group full-width">
          <label class="form-label">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 2C6.48 2 2 6.48 2 12S6.48 22 12 22S22 17.52 22 12S17.52 2 12 2ZM12 20C7.59 20 4 16.41 4 12S7.59 4 12 4S20 7.59 20 12S16.41 20 12 20ZM12.5 7H11V13L16.25 16.15L17 14.92L12.5 12.25V7Z" fill="currentColor"/>
            </svg>
            Publishing Options
          </label>
          <div class="publishing-options">
            <label class="checkbox-label">
              <input type="checkbox" formControlName="isPublished" class="checkbox-input">
              <span class="checkbox-custom"></span>
              <div class="checkbox-content">
                <div class="checkbox-title">Publish immediately</div>
                <div class="checkbox-description">Make this course available to students right away</div>
              </div>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" formControlName="isFeatured" class="checkbox-input">
              <span class="checkbox-custom"></span>
              <div class="checkbox-content">
                <div class="checkbox-title">Feature this course</div>
                <div class="checkbox-description">Show this course prominently on the homepage</div>
              </div>
            </label>
          </div>
        </div>

        <div class="step-actions">
          <button type="button" class="btn-back" (click)="prevStep()">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M15.41 7.41L14 6L8 12L14 18L15.41 16.59L10.83 12L15.41 7.41Z" fill="currentColor"/>
            </svg>
            Previous
          </button>
        </div>
      </div>

      <!-- Course Summary Section -->
      <div class="course-summary" *ngIf="currentStep === 3 && !isSubmitting">
        <div class="summary-header">
          <h3>Review Your Course</h3>
          <p>Double-check your information before submitting</p>
        </div>
        <div class="summary-content">
          <div class="summary-row">
            <span class="summary-label">Title:</span>
            <span class="summary-value">{{ courseForm.get('title')?.value || 'Not set' }}</span>
          </div>
          <div class="summary-row">
            <span class="summary-label">Category:</span>
            <span class="summary-value">{{ courseForm.get('category')?.value || 'Not set' }}</span>
          </div>
          <div class="summary-row">
            <span class="summary-label">Difficulty:</span>
            <span class="summary-value">{{ courseForm.get('difficulty')?.value || 'Not set' }}</span>
          </div>
          <div class="summary-row">
            <span class="summary-label">Price:</span>
            <span class="summary-value">{{ courseForm.get('price')?.value === 0 ? 'Free' : '$' + courseForm.get('price')?.value }}</span>
          </div>
          <div class="summary-row">
            <span class="summary-label">Published:</span>
            <span class="summary-value">{{ courseForm.get('isPublished')?.value ? 'Yes' : 'No' }}</span>
          </div>
        </div>
      </div>

      <!-- Error Display -->
      <div class="error-section" *ngIf="error">
        <div class="error-alert">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 2C6.48 2 2 6.48 2 12S6.48 22 12 22S22 17.52 22 12S17.52 2 12 2ZM13 17H11V15H13V17ZM13 13H11V7H13V13Z" fill="currentColor"/>
          </svg>
          {{ error }}
        </div>
      </div>

      <!-- Form Actions -->
      <div class="form-actions">
        <button type="button" class="btn-secondary" (click)="onCancel()" [disabled]="isSubmitting">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z" fill="currentColor"/>
          </svg>
          Cancel
        </button>
        <button type="submit" class="btn-primary" [disabled]="isSubmitting || courseForm.invalid">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" *ngIf="!isSubmitting">
            <path d="M9 16.17L4.83 12L3.41 13.41L9 19L21 7L19.59 5.59L9 16.17Z" fill="currentColor"/>
          </svg>
          <div class="spinner" *ngIf="isSubmitting"></div>
          <span *ngIf="!isSubmitting">{{ isEditMode ? 'Update Course' : 'Create Course' }}</span>
          <span *ngIf="isSubmitting">{{ isEditMode ? 'Updating...' : 'Creating...' }}</span>
        </button>
      </div>
    </form>
  </div>
</div>

